local units = require("units")

local levels = {}

--- The levels found in the game.
local LEVELS = {
	{
		map = {
			{ 09, 03, 03, 03, 14, 15, 16, 03, 03, 10 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 02, 02, 02, 01, 01, 05 },
			{ 04, 01, 01, 01, 24, 24, 24, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 07, 11, 12, 13, 06, 06, 06, 06, 06, 08 },
		},
		players = {
			{ 5, 1 },
			{ 4, 1 },
			{ 6, 1 },
		},
		enemies = {
			{ 4, 3, 7 },
			{ 4, 7, 7 },
		},
	},
	{
		map = {
			{ 09, 14, 15, 16, 03, 03, 03, 03, 03, 10 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 17, 01, 01, 02, 17, 01, 01, 05 },
			{ 04, 02, 02, 01, 01, 24, 17, 01, 01, 05 },
			{ 04, 24, 24, 01, 01, 01, 02, 02, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 24, 24, 01, 05 },
			{ 07, 06, 06, 06, 11, 12, 13, 06, 06, 08 },
		},
		players = {
			{ 2, 1 },
			{ 1, 1 },
			{ 3, 1 },
		},
		enemies = {
			{ 4, 5, 6 },
			{ 5, 7, 3 },
			{ 4, 3, 6 },
		},
	},
	{
		map = {
			{ 09, 03, 03, 03, 14, 15, 16, 03, 03, 10 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 17, 17, 01, 01, 17, 17, 01, 05 },
			{ 04, 01, 02, 02, 01, 01, 02, 02, 01, 05 },
			{ 04, 01, 24, 24, 01, 01, 24, 24, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 07, 06, 06, 06, 11, 12, 13, 06, 06, 08 },
		},
		players = {
			{ 5, 1 },
			{ 4, 1 },
			{ 6, 1 },
		},
		enemies = {
			{ 4, 1, 4 },
			{ 5, 4, 7 },
			{ 5, 5, 7 },
			{ 4, 8, 5 },
		},
	},
	{
		map = {
			{ 09, 03, 03, 03, 14, 15, 16, 03, 03, 10 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 17, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 17, 01, 01, 17, 17, 01, 05 },
			{ 04, 01, 01, 17, 01, 01, 02, 02, 01, 05 },
			{ 04, 01, 01, 17, 01, 01, 24, 24, 01, 05 },
			{ 04, 01, 01, 02, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 24, 01, 01, 01, 01, 01, 05 },
			{ 07, 11, 12, 13, 06, 06, 06, 06, 06, 08 },
		},
		players = {
			{ 5, 1 },
			{ 4, 1 },
			{ 6, 1 },
		},
		enemies = {
			{ 4, 2, 5 },
			{ 4, 1, 6 },
			{ 4, 1, 3 },
			{ 5, 4, 7 },
			{ 5, 6, 6 },
			{ 4, 8, 4 },
		},
	},
	{
		map = {
			{ 09, 14, 15, 16, 03, 03, 03, 03, 03, 10 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 02, 02, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 24, 24, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 18, 19, 19, 19, 20, 01, 05 },
			{ 04, 01, 01, 21, 22, 22, 22, 23, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 07, 06, 06, 06, 06, 06, 11, 12, 13, 08 },
		},
		players = {
			{ 2, 1 },
			{ 1, 1 },
			{ 3, 1 },
		},
		enemies = {
			{ 4, 1, 4 },
			{ 4, 7, 2 },
			{ 5, 2, 6 },
			{ 5, 8, 3 },
			{ 6, 6, 7 },
		},
	},
	{
		map = {
			{ 09, 03, 03, 03, 03, 03, 14, 15, 16, 10 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 02, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 24, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 18, 20, 01, 01, 18, 20, 01, 05 },
			{ 04, 01, 21, 23, 01, 01, 21, 23, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 02, 02, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 24, 24, 01, 05 },
			{ 07, 06, 06, 06, 11, 12, 13, 06, 06, 08 },
		},
		players = {
			{ 7, 1 },
			{ 6, 1 },
			{ 8, 1 },
		},
		enemies = {
			{ 4, 8, 5 },
			{ 7, 7, 6 },
			{ 5, 1, 4 },
			{ 6, 1, 5 },
			{ 6, 4, 6 },
		},
	},
	{
		map = {
			{ 09, 03, 03, 03, 14, 15, 16, 03, 03, 10 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 17, 02, 01, 01, 02, 17, 01, 05 },
			{ 04, 01, 02, 24, 01, 01, 24, 02, 01, 05 },
			{ 04, 01, 24, 01, 18, 20, 01, 24, 01, 05 },
			{ 04, 01, 01, 01, 21, 23, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 01, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 02, 01, 01, 05 },
			{ 04, 01, 01, 01, 01, 01, 24, 01, 01, 05 },
			{ 07, 06, 06, 06, 06, 06, 06, 06, 06, 08 },
		},
		players = {
			{ 5, 1 },
			{ 4, 1 },
			{ 6, 1 },
		},
		enemies = {
			{ 4, 3, 5 },
			{ 4, 6, 5 },
			{ 7, 8, 6 },
			{ 5, 1, 6 },
			{ 6, 7, 7 },
			{ 8, 2, 7 },
		},
	},
}

--- The maxium level in the game.
levels.MAX_LEVEL = #LEVELS

--- Builds the given level identified by its numeric ID. If no player units are given
-- it creates a new squad, otherwise it reuses them. That allows to keep the squad for the
-- whole game run.
function levels.build(lvl, playerUnits)
	local enemyUnits = {}

	for _, u in ipairs(LEVELS[lvl].enemies) do
		table.insert(enemyUnits, units.newUnit(units.KIND[u[1]], u[2], u[3]))
	end

	for i, unit in ipairs(playerUnits) do
		unit.x = LEVELS[lvl].players[i][1]
		unit.y = LEVELS[lvl].players[i][2]
	end

	return LEVELS[lvl].map, playerUnits, enemyUnits
end

return levels
